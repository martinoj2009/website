<!DOCTYPE html> <!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--> <!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--> <!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--> <!--[if gt IE 8]><!--> <html class="no-js"><!--<![endif]--> <head> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"> <title>I made a Python script that will post to my blog &#8211; Martino Jones</title> <meta name="description" content=""> <meta name="keywords" content="python, script, post, to, jekyll, blog"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="https://martinojones.com/assets/img/logo.jpg"> <meta name="twitter:title" content="I made a Python script that will post to my blog"> <meta name="twitter:site" content="@martinoj2009"> <meta name="twitter:creator" content="@martinoj2009"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="I made a Python script that will post to my blog"> <meta property="og:url" content="https://martinojones.com/made-a-python-script-to-post-to-my-blog/"> <meta property="og:site_name" content="Martino Jones"> <meta property="og:image" content="https://martinojones.com/assets/img/logo.jpg"> <link rel="canonical" href="https://martinojones.com/made-a-python-script-to-post-to-my-blog/"> <link href="https://martinojones.com/feed.xml" type="application/atom+xml" rel="alternate" title="Martino Jones Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="https://martinojones.com/assets/css/main.css"> <!-- JS --> <script src="https://martinojones.com/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="https://martinojones.com/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="https://martinojones.com/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="https://martinojones.com/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="https://martinojones.com/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="https://martinojones.com/favicon.png" /> <link rel="shortcut icon" href="https://martinojones.com/favicon.ico" /> <!-- Background Image --> <style type="text/css">body {background-image:url(https://martinojones.com/assets/img/placeholder-big.jpg); background-repeat: no-repeat; background-size: cover; }</style> <!-- Post Feature Image --> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <li><a href="https://martinojones.com/">Home</a></li> <li> <a href="#">About</a> <ul class="dl-submenu"> <li> <img src="https://martinojones.com/assets/img/logo.jpg" alt="Martino Jones photo" class="author-photo"> <h4>Martino Jones</h4> <p></p> </li> <li><a href="https://martinojones.com/about/"><span class="btn btn-inverse">Learn More</span></a></li> <li> <a href="http://twitter.com/martinoj2009" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a> </li> <li> <a href="http://linkedin.com/in/martinojones" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-linkedin-square"></i> LinkedIn</a> </li> <li> <a href="http://github.com/martinoj2009" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> <li> <a href="http://steamcommunity.com/id/martinoj2009" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-steam-square"></i> Steam</a> </li> <li> <a href="https://youtube.com/user/martinoj2009" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-youtube-square"></i> Youtube</a> </li> </ul><!-- /.dl-submenu --> </li> <li> <a href="#">Posts</a> <ul class="dl-submenu"> <li><a href="https://martinojones.com/posts/">All Posts</a></li> <li><a href="https://martinojones.com/tags/">All Tags</a></li> </ul> </li> </ul><!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn"> <div class="content"> <div class="post-title "> <h1>I made a Python script that will post to my blog</h1> <h4>11 Oct 2015</h4> <p class="reading-time"> <i class="fa fa-clock-o"></i> Reading time ~2.68 minutes </p><!-- /.entry-reading-time --> <a class="btn zoombtn" href="https://martinojones.com/posts/"> <i class="fa fa-chevron-left"></i> </a> </div> <p> I use Jekyll for my blog now, but the problem with that is I have to manually go into the posts directory and write my posts. It's not like WordPress or Drupal where I can just go to a webpage and get a WYSISYG editor and it posts to the blog. I have to put the file in the posts folder with the: layout type, name, title, time and tags. Then I need to build the blog site, then I can take the contents from the site folder and upload it to my webserver, well I use Git for that; however, I'm debating on using rsync because Git takes a little more space. I also don't really need the tracking because I keep a local copy on my laptop... although if I move to another machine it would be easy to: <div><pre><code class='bash'>git pull</code></pre></div> </p> <p> Anyway, I made a script that accepts two arguments, the first argument is required. You pass in the location of the file you want to post, if it's in the current directory you just need to pass in the name. The second argument is optional, it's the location of your blog, it will test for a folder called _posts so you need to make sure that's in blog folder location.</p> <p> This is a work in progress, there's some other things I want to add to it. And this is is version 1.0.</p> <p></p> <div><pre><code class='python'>#!/usr/bin/python3
import sys
import os.path
import time
import datetime

#Print error and exit
def errorMessage(messsage):
    print(&quot;There was an error!&quot;)
    print(&quot;Error: &quot;, messsage)

# This is for counting the args print(len(sys.argv))
if len(sys.argv) &lt;= 1:
    errorMessage(&quot;You need to provide a file!&quot;)
    sys.exit()

fileName = (sys.argv[1])

#Test if file exists
if not os.path.isfile(fileName):
    errorMessage(&quot;File was not found!&quot;)

#Open file
fileOpen = open('%s' % fileName,'r')
fileRead = fileOpen.read()
fileOpen.close()
fileRead = fileRead.split(&quot;\n&quot;)

#Replace all spaces in file name with dash and remove any periods
fileName2 = fileName.split(&quot;.&quot;)[0]
fileName2 = fileName.replace(&quot; &quot;,&quot;-&quot;)

#Set the post name
postName = str(datetime.date.today()) + '-' + str(time.strftime(&quot;%H-%M-%S&quot;)) + &quot;-&quot; + fileName2.split(&quot;.&quot;)[0] + &quot;.html&quot;
postTime = str(datetime.date.today()) + &quot; &quot; + str(time.strftime(&quot;%H-%M-%S&quot;))

#Find tags in file
tagsInFile = ''
with open(&quot;%s&quot; % fileName) as f:
    for line in f:
        if &quot;tags:&quot; in line:
             tagsInFile = line
print(tagsInFile)
if len(tagsInFile) &gt; 0:
    tagsInFile = tagsInFile.split(&quot;:&quot;)[1]
    print(tagsInFile)
#time to create the file
print(&quot;Post name &quot; + postName)
print(&quot;File name2 &quot; + fileName2)
fileWrite = open(&quot;%s&quot; % postName, 'w+')
fileWrite.write(&quot;---\n&quot;)
fileWrite.write(&quot;layout: post\n&quot;)
fileWrite.write(&quot;name: &quot; + (fileName2.split(&quot;.&quot;)[0]).replace(&quot;-&quot;,&quot; &quot;) + &quot;\n&quot;)
fileWrite.write(&quot;title: &quot; + (fileName2.split(&quot;.&quot;)[0]).replace(&quot;-&quot;,&quot; &quot;) + &quot;\n&quot;)
fileWrite.write(&quot;time: %s\n&quot; % postTime)
#Test if there's tags and write them into the post
if len(tagsInFile) &gt; 0:
    fileWrite.write(&quot;tags:&quot; + tagsInFile + &quot;\n&quot;)
fileWrite.write(&quot;---\n&quot;)

#This will now write out the lines in the file, excluding tags
print(len(fileRead))
num = 0
for x in fileRead:
    if not &quot;tags:&quot; in fileRead[num]:
        fileWrite.write(x + &quot;\n&quot;)
    num + 1

#Now it's time to move this file to the blog
if len(sys.argv) &lt;= 2:
    errorMessage(&quot;No path to the blog provided. Will leave the post here.&quot;)
    sys.exit()

#Path provided, now test it
blogPath = sys.argv[2]
pathToSite = blogPath + &quot;_posts&quot;
print(pathToSite)
if not os.path.isdir(pathToSite):
    errorMessage(&quot;The blog path provided doesn't exist.&quot;)
    sys.exit()

#Move the file
newName = pathToSite + &quot;/&quot; + postName
os.rename(postName, newName)</code></pre></div> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="https://martinojones.com/tags/#python" title="Pages tagged python" class="tag"><span class="term">python</span></a><a href="https://martinojones.com/tags/#script" title="Pages tagged script" class="tag"><span class="term">script</span></a><a href="https://martinojones.com/tags/#post" title="Pages tagged post" class="tag"><span class="term">post</span></a><a href="https://martinojones.com/tags/#to" title="Pages tagged to" class="tag"><span class="term">to</span></a><a href="https://martinojones.com/tags/#jekyll" title="Pages tagged jekyll" class="tag"><span class="term">jekyll</span></a><a href="https://martinojones.com/tags/#blog" title="Pages tagged blog" class="tag"><span class="term">blog</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=https://martinojones.com/made-a-python-script-to-post-to-my-blog/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Like</span> </a> <a href="https://twitter.com/intent/tweet?text=https://martinojones.com/made-a-python-script-to-post-to-my-blog/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=https://martinojones.com/made-a-python-script-to-post-to-my-blog/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> <div style="clear:both"></div> </div> </div> </div> </header> <!-- JS --> <script src="https://martinojones.com/assets/js/jquery-1.12.0.min.js"></script> <script src="https://martinojones.com/assets/js/jquery.dlmenu.min.js"></script> <script src="https://martinojones.com/assets/js/jquery.goup.min.js"></script> <script src="https://martinojones.com/assets/js/jquery.magnific-popup.min.js"></script> <script src="https://martinojones.com/assets/js/jquery.fitvid.min.js"></script> <script src="https://martinojones.com/assets/js/scripts.js"></script> <script type="text/javascript"> var disqus_shortname = 'martinoj2009'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); (function () { var s = document.createElement('script'); s.async = true; s.type = 'text/javascript'; s.src = '//' + disqus_shortname + '.disqus.com/count.js'; (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s); }()); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <!-- MathJax --> <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>
