<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--><!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--><!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--><!--[if gt IE 8]><!--><html class="no-js">
<!--<![endif]--> <head> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <title>I made a Python script that will post to my blog â€“ Martino Jones</title> <meta name="description" content="This is my personal blog where I talk about projects I'm working on and other technology related things."> <meta name="keywords" content="python, script, post, to, jekyll, blog"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="https://martinojones.com/assets/img/logo.jpg"> <meta name="twitter:title" content="I made a Python script that will post to my blog"> <meta name="twitter:description" content=" I use Jekyll for my blog now, but the problem with that is I have to manually go into the posts directory and write my posts. It's not like WordPress or Drupal where I can just go to a webpage and get a WYSISYG editor and it posts to the blog. I have to put the file in the posts folder with the: layout type, name, title, time and tags. Then I need to build the blog site, then I can take the contents from the site folder and upload it to my webserver, well I use Git for that; however, I'm debating on using rsync because Git takes a little more space. I also don't really need the tracking because I keep a local copy on my laptop... although if I move to another machine it would be easy to: git pull "> <meta name="twitter:site" content="@martinoj2009"> <meta name="twitter:creator" content="@martinoj2009"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="I made a Python script that will post to my blog"> <meta property="og:description" content=" I use Jekyll for my blog now, but the problem with that is I have to manually go into the posts directory and write my posts. It's not like WordPress or Drupal where I can just go to a webpage and get a WYSISYG editor and it posts to the blog. I have to put the file in the posts folder with the: layout type, name, title, time and tags. Then I need to build the blog site, then I can take the contents from the site folder and upload it to my webserver, well I use Git for that; however, I'm debating on using rsync because Git takes a little more space. I also don't really need the tracking because I keep a local copy on my laptop... although if I move to another machine it would be easy to: git pull "> <meta property="og:url" content="https://martinojones.com/made-a-python-script-to-post-to-my-blog/"> <meta property="og:site_name" content="Martino Jones"> <meta property="og:image" content="https://martinojones.com/assets/img/logo.jpg"> <link rel="canonical" href="https://martinojones.com/made-a-python-script-to-post-to-my-blog/"> <link href="https://martinojones.com/feed.xml" type="application/atom+xml" rel="alternate" title="Martino Jones Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="https://martinojones.com/assets/css/main.css"> <!-- JS --> <script src="https://martinojones.com/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="https://martinojones.com/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="https://martinojones.com/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="https://martinojones.com/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="https://martinojones.com/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="https://martinojones.com/favicon.png"> <link rel="shortcut icon" href="https://martinojones.com/favicon.ico"> <!-- Background Image --> <style type="text/css">body {background-image:url(https://martinojones.com/assets/img/placeholder-big.jpg); background-repeat: no-repeat; background-size: cover; }</style> <!-- Post Feature Image --> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <li><a href="https://martinojones.com/">Home</a></li> <li> <a href="#">About</a> <ul class="dl-submenu"> <li> <img src="https://martinojones.com/assets/img/logo.jpg" alt="Martino Jones photo" class="author-photo"> <h4>Martino Jones</h4> <p>This is my personal blog where I talk about projects I'm working on and other technology related things.</p> </li> <li><a href="https://martinojones.com/about/"><span class="btn btn-inverse">Learn More</span></a></li> <li> <a href="http://twitter.com/martinoj2009" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a> </li> <li> <a href="http://plus.google.com/+martinoj2009" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-google-plus-square"></i> Google+</a> </li> <li> <a href="http://linkedin.com/in/martinojones" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-linkedin-square"></i> LinkedIn</a> </li> <li> <a href="http://github.com/martinoj2009" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> <li> <a href="http://steamcommunity.com/id/martinoj2009" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-steam-square"></i> Steam</a> </li> <li> <a href="https://youtube.com/user/martinoj2009" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-youtube-square"></i> Youtube</a> </li> </ul>
<!-- /.dl-submenu --> </li> <li> <a href="#">Posts</a> <ul class="dl-submenu"> <li><a href="https://martinojones.com/posts/">All Posts</a></li> <li><a href="https://martinojones.com/tags/">All Tags</a></li> </ul> </li> <li><a href="https://martinojones.com/projects/">Projects</a></li> </ul>
<!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn"> <div class="content"> <div class="post-title "> <h1>I made a Python script that will post to my blog</h1> <h4>11 Oct 2015</h4> <p class="reading-time"> <i class="fa fa-clock-o"></i> Reading time ~3 minutes </p>
<!-- /.entry-reading-time --> <a class="btn zoombtn" href="https://martinojones.com/posts/"> <i class="fa fa-chevron-left"></i> </a> </div> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <!-- martinojones.com --> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3961058330418465" data-ad-slot="8621008831" data-ad-format="auto"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script> <p> I use Jekyll for my blog now, but the problem with that is I have to manually go into the posts directory and write my posts. It's not like WordPress or Drupal where I can just go to a webpage and get a WYSISYG editor and it posts to the blog. I have to put the file in the posts folder with the: layout type, name, title, time and tags. Then I need to build the blog site, then I can take the contents from the site folder and upload it to my webserver, well I use Git for that; however, I'm debating on using rsync because Git takes a little more space. I also don't really need the tracking because I keep a local copy on my laptop... although if I move to another machine it would be easy to: <figure class="highlight"><pre><code class="language-bash" data-lang="bash"> git pull </code></pre></figure></p> <p> Anyway, I made a script that accepts two arguments, the first argument is required. You pass in the location of the file you want to post, if it's in the current directory you just need to pass in the name. The second argument is optional, it's the location of your blog, it will test for a folder called _posts so you need to make sure that's in blog folder location.</p> <p> This is a work in progress, there's some other things I want to add to it. And this is is version 1.0.</p> <p></p> <figure class="highlight"><pre><code class="language-python" data-lang="python">  <span class="c">#!/usr/bin/python3</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os.path</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">datetime</span>

<span class="c">#Print error and exit</span>
<span class="k">def</span> <span class="nf">errorMessage</span><span class="p">(</span><span class="n">messsage</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"There was an error!"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Error: "</span><span class="p">,</span> <span class="n">messsage</span><span class="p">)</span>

<span class="c"># This is for counting the args print(len(sys.argv))</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">errorMessage</span><span class="p">(</span><span class="s">"You need to provide a file!"</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="nb">exit</span><span class="p">()</span>

<span class="n">fileName</span> <span class="o">=</span> <span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="c">#Test if file exists</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">fileName</span><span class="p">):</span>
    <span class="n">errorMessage</span><span class="p">(</span><span class="s">"File was not found!"</span><span class="p">)</span>

<span class="c">#Open file</span>
<span class="n">fileOpen</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'</span><span class="si">%</span><span class="s">s'</span> <span class="o">%</span> <span class="n">fileName</span><span class="p">,</span><span class="s">'r'</span><span class="p">)</span>
<span class="n">fileRead</span> <span class="o">=</span> <span class="n">fileOpen</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">fileOpen</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">fileRead</span> <span class="o">=</span> <span class="n">fileRead</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span>

<span class="c">#Replace all spaces in file name with dash and remove any periods</span>
<span class="n">fileName2</span> <span class="o">=</span> <span class="n">fileName</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">"."</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">fileName2</span> <span class="o">=</span> <span class="n">fileName</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">" "</span><span class="p">,</span><span class="s">"-"</span><span class="p">)</span>

<span class="c">#Set the post name</span>
<span class="n">postName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">())</span> <span class="o">+</span> <span class="s">'-'</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">"</span><span class="si">%</span><span class="s">H-</span><span class="si">%</span><span class="s">M-</span><span class="si">%</span><span class="s">S"</span><span class="p">))</span> <span class="o">+</span> <span class="s">"-"</span> <span class="o">+</span> <span class="n">fileName2</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">"."</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s">".html"</span>
<span class="n">postTime</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">())</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">"</span><span class="si">%</span><span class="s">H-</span><span class="si">%</span><span class="s">M-</span><span class="si">%</span><span class="s">S"</span><span class="p">))</span>

<span class="c">#Find tags in file</span>
<span class="n">tagsInFile</span> <span class="o">=</span> <span class="s">''</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">"</span><span class="si">%</span><span class="s">s"</span> <span class="o">%</span> <span class="n">fileName</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">if</span> <span class="s">"tags:"</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
             <span class="n">tagsInFile</span> <span class="o">=</span> <span class="n">line</span>
<span class="k">print</span><span class="p">(</span><span class="n">tagsInFile</span><span class="p">)</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tagsInFile</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">tagsInFile</span> <span class="o">=</span> <span class="n">tagsInFile</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">":"</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">print</span><span class="p">(</span><span class="n">tagsInFile</span><span class="p">)</span>
<span class="c">#time to create the file</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Post name "</span> <span class="o">+</span> <span class="n">postName</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"File name2 "</span> <span class="o">+</span> <span class="n">fileName2</span><span class="p">)</span>
<span class="n">fileWrite</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">"</span><span class="si">%</span><span class="s">s"</span> <span class="o">%</span> <span class="n">postName</span><span class="p">,</span> <span class="s">'w+'</span><span class="p">)</span>
<span class="n">fileWrite</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">"---</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span>
<span class="n">fileWrite</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">"layout: post</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span>
<span class="n">fileWrite</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">"name: "</span> <span class="o">+</span> <span class="p">(</span><span class="n">fileName2</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">"."</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">"-"</span><span class="p">,</span><span class="s">" "</span><span class="p">)</span> <span class="o">+</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span>
<span class="n">fileWrite</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">"title: "</span> <span class="o">+</span> <span class="p">(</span><span class="n">fileName2</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">"."</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">"-"</span><span class="p">,</span><span class="s">" "</span><span class="p">)</span> <span class="o">+</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span>
<span class="n">fileWrite</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">"time: </span><span class="si">%</span><span class="s">s</span><span class="se">\n</span><span class="s">"</span> <span class="o">%</span> <span class="n">postTime</span><span class="p">)</span>
<span class="c">#Test if there's tags and write them into the post</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tagsInFile</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">fileWrite</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">"tags:"</span> <span class="o">+</span> <span class="n">tagsInFile</span> <span class="o">+</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span>
<span class="n">fileWrite</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">"---</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span>

<span class="c">#This will now write out the lines in the file, excluding tags</span>
<span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">fileRead</span><span class="p">))</span>
<span class="n">num</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">fileRead</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="s">"tags:"</span> <span class="ow">in</span> <span class="n">fileRead</span><span class="p">[</span><span class="n">num</span><span class="p">]:</span>
        <span class="n">fileWrite</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span>
    <span class="n">num</span> <span class="o">+</span> <span class="mi">1</span>

<span class="c">#Now it's time to move this file to the blog</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">2</span><span class="p">:</span>
    <span class="n">errorMessage</span><span class="p">(</span><span class="s">"No path to the blog provided. Will leave the post here."</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="nb">exit</span><span class="p">()</span>

<span class="c">#Path provided, now test it</span>
<span class="n">blogPath</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="n">pathToSite</span> <span class="o">=</span> <span class="n">blogPath</span> <span class="o">+</span> <span class="s">"_posts"</span>
<span class="k">print</span><span class="p">(</span><span class="n">pathToSite</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">pathToSite</span><span class="p">):</span>
    <span class="n">errorMessage</span><span class="p">(</span><span class="s">"The blog path provided doesn't exist."</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="nb">exit</span><span class="p">()</span>

<span class="c">#Move the file</span>
<span class="n">newName</span> <span class="o">=</span> <span class="n">pathToSite</span> <span class="o">+</span> <span class="s">"/"</span> <span class="o">+</span> <span class="n">postName</span>
<span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">postName</span><span class="p">,</span> <span class="n">newName</span><span class="p">)</span></code></pre></figure> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="https://martinojones.com/tags/#python" title="Pages tagged python" class="tag"><span class="term">python</span></a><a href="https://martinojones.com/tags/#script" title="Pages tagged script" class="tag"><span class="term">script</span></a><a href="https://martinojones.com/tags/#post" title="Pages tagged post" class="tag"><span class="term">post</span></a><a href="https://martinojones.com/tags/#to" title="Pages tagged to" class="tag"><span class="term">to</span></a><a href="https://martinojones.com/tags/#jekyll" title="Pages tagged jekyll" class="tag"><span class="term">jekyll</span></a><a href="https://martinojones.com/tags/#blog" title="Pages tagged blog" class="tag"><span class="term">blog</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=https://martinojones.com/made-a-python-script-to-post-to-my-blog/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Like</span> </a> <a href="https://twitter.com/intent/tweet?text=https://martinojones.com/made-a-python-script-to-post-to-my-blog/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=https://martinojones.com/made-a-python-script-to-post-to-my-blog/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> <div style="clear:both"></div> </div> </div> </div> </header> <!-- JS --> <script src="https://martinojones.com/assets/js/jquery-1.12.0.min.js"></script> <script src="https://martinojones.com/assets/js/jquery.dlmenu.min.js"></script> <script src="https://martinojones.com/assets/js/jquery.goup.min.js"></script> <script src="https://martinojones.com/assets/js/jquery.magnific-popup.min.js"></script> <script src="https://martinojones.com/assets/js/jquery.fitvid.min.js"></script> <script src="https://martinojones.com/assets/js/scripts.js"></script> <!-- Asynchronous Google Analytics snippet --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-79568415-1', 'auto'); ga('require', 'linkid', 'linkid.js'); ga('send', 'pageview'); </script> <script type="text/javascript"> var disqus_shortname = 'martinoj2009'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); (function () { var s = document.createElement('script'); s.async = true; s.type = 'text/javascript'; s.src = '//' + disqus_shortname + '.disqus.com/count.js'; (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s); }()); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript> <!-- MathJax --> <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>
